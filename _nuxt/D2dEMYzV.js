import{ag as te,aB as le,a0 as ge,ah as Fe,ai as ae,bt as Ce,a2 as Ie,r as q,j as f,F as ue,a5 as ie,am as de,br as Y,a1 as Me,d as ne,a3 as be,al as Le,aD as fe,t as I,v as M,z as Pe,A as we,x as J,a9 as _,aa as l,y as _e,ay as Ke,ab as G,aw as Se,h as Xe,bu as Ye,a4 as Re,aF as ke,o as $e,ak as We,a7 as ce,ao as re,af as se,aO as me,aJ as Ue,at as pe}from"./BJ4U74QN.js";import{d as Ee,a as Oe}from"./BpiaDATT.js";import{C as Ne,I as he,U as oe,u as Be,p as Ae,v as je,s as He,r as Ge}from"./VBWnuYbd.js";const Te=Symbol("sliderContextKey"),Je=ge({modelValue:{type:ae([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Be,inputSize:Be,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:ae(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:ae(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Ce,default:"top"},marks:{type:ae(Object)},validateEvent:{type:Boolean,default:!0},...Fe(["ariaLabel"])}),ve=e=>te(e)||le(e)&&e.every(te),qe={[oe]:ve,[he]:ve,[Ne]:ve},Qe=ge({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Ce,default:"top"}}),Ze={[oe]:e=>te(e)},De=(e,a,d)=>{const t=q(),s=q(!1),m=f(()=>a.value instanceof Function),u=f(()=>m.value&&a.value(e.modelValue)||e.modelValue),b=Ee(()=>{d.value&&(s.value=!0)},50),h=Ee(()=>{d.value&&(s.value=!1)},50);return{tooltip:t,tooltipVisible:s,formatValue:u,displayTooltip:b,hideTooltip:h}},ea=(e,a,d)=>{const{disabled:t,min:s,max:m,step:u,showTooltip:b,precision:h,sliderSize:i,formatTooltip:v,emitChange:n,resetSize:k,updateDragging:P}=Ie(Te),{tooltip:z,tooltipVisible:K,formatValue:N,displayTooltip:T,hideTooltip:E}=De(e,v,b),L=q(),B=f(()=>`${(e.modelValue-s.value)/(m.value-s.value)*100}%`),R=f(()=>e.vertical?{bottom:B.value}:{left:B.value}),$=()=>{a.hovering=!0,T()},O=()=>{a.hovering=!1,a.dragging||E()},Q=c=>{t.value||(c.preventDefault(),H(c),window.addEventListener("mousemove",x),window.addEventListener("touchmove",x),window.addEventListener("mouseup",w),window.addEventListener("touchend",w),window.addEventListener("contextmenu",w),L.value.focus())},F=c=>{t.value||(a.newPosition=Number.parseFloat(B.value)+c/(m.value-s.value)*100,C(a.newPosition),n())},Z=()=>{F(-u.value)},W=()=>{F(u.value)},r=()=>{F(-u.value*4)},y=()=>{F(u.value*4)},V=()=>{t.value||(C(0),n())},A=()=>{t.value||(C(100),n())},j=c=>{let g=!0;switch(c.code){case Y.left:case Y.down:Z();break;case Y.right:case Y.up:W();break;case Y.home:V();break;case Y.end:A();break;case Y.pageDown:r();break;case Y.pageUp:y();break;default:g=!1;break}g&&c.preventDefault()},U=c=>{let g,S;return c.type.startsWith("touch")?(S=c.touches[0].clientY,g=c.touches[0].clientX):(S=c.clientY,g=c.clientX),{clientX:g,clientY:S}},H=c=>{a.dragging=!0,a.isClick=!0;const{clientX:g,clientY:S}=U(c);e.vertical?a.startY=S:a.startX=g,a.startPosition=Number.parseFloat(B.value),a.newPosition=a.startPosition},x=c=>{if(a.dragging){a.isClick=!1,T(),k();let g;const{clientX:S,clientY:X}=U(c);e.vertical?(a.currentY=X,g=(a.startY-a.currentY)/i.value*100):(a.currentX=S,g=(a.currentX-a.startX)/i.value*100),a.newPosition=a.startPosition+g,C(a.newPosition)}},w=()=>{a.dragging&&(setTimeout(()=>{a.dragging=!1,a.hovering||E(),a.isClick||C(a.newPosition),n()},0),window.removeEventListener("mousemove",x),window.removeEventListener("touchmove",x),window.removeEventListener("mouseup",w),window.removeEventListener("touchend",w),window.removeEventListener("contextmenu",w))},C=async c=>{if(c===null||Number.isNaN(+c))return;c<0?c=0:c>100&&(c=100);const g=100/((m.value-s.value)/u.value);let X=Math.round(c/g)*g*(m.value-s.value)*.01+s.value;X=Number.parseFloat(X.toFixed(h.value)),X!==e.modelValue&&d(oe,X),!a.dragging&&e.modelValue!==a.oldValue&&(a.oldValue=e.modelValue),await de(),a.dragging&&T(),z.value.updatePopper()};return ue(()=>a.dragging,c=>{P(c)}),ie(L,"touchstart",Q,{passive:!1}),{disabled:t,button:L,tooltip:z,tooltipVisible:K,showTooltip:b,wrapperStyle:R,formatValue:N,handleMouseEnter:$,handleMouseLeave:O,onButtonDown:Q,onKeyDown:j,setPosition:C}},aa=ne({name:"ElSliderButton"}),la=ne({...aa,props:Qe,emits:Ze,setup(e,{expose:a,emit:d}){const t=e,s=be("slider"),m=Le({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:t.modelValue}),{disabled:u,button:b,tooltip:h,showTooltip:i,tooltipVisible:v,wrapperStyle:n,formatValue:k,handleMouseEnter:P,handleMouseLeave:z,onButtonDown:K,onKeyDown:N,setPosition:T}=ea(t,m,d),{hovering:E,dragging:L}=fe(m);return a({onButtonDown:K,onKeyDown:N,setPosition:T,hovering:E,dragging:L}),(B,R)=>(M(),I("div",{ref_key:"button",ref:b,class:_([l(s).e("button-wrapper"),{hover:l(E),dragging:l(L)}]),style:G(l(n)),tabindex:l(u)?-1:0,onMouseenter:l(P),onMouseleave:l(z),onMousedown:l(K),onFocus:l(P),onBlur:l(z),onKeydown:l(N)},[Pe(l(Ke),{ref_key:"tooltip",ref:h,visible:l(v),placement:B.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":B.tooltipClass,disabled:!l(i),persistent:l(i)},{content:we(()=>[J("span",null,_e(l(k)),1)]),default:we(()=>[J("div",{class:_([l(s).e("button"),{hover:l(E),dragging:l(L)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var xe=Me(la,[["__file","button.vue"]]);const ta=ge({mark:{type:ae([String,Object]),default:void 0}});var na=ne({name:"ElSliderMarker",props:ta,setup(e){const a=be("slider"),d=f(()=>Se(e.mark)?e.mark:e.mark.label),t=f(()=>Se(e.mark)?void 0:e.mark.style);return()=>Xe("div",{class:a.e("marks-text"),style:t.value},d.value)}});const oa=(e,a,d)=>{const{form:t,formItem:s}=Ae(),m=Ye(),u=q(),b=q(),h={firstButton:u,secondButton:b},i=f(()=>e.disabled||(t==null?void 0:t.disabled)||!1),v=f(()=>Math.min(a.firstValue,a.secondValue)),n=f(()=>Math.max(a.firstValue,a.secondValue)),k=f(()=>e.range?`${100*(n.value-v.value)/(e.max-e.min)}%`:`${100*(a.firstValue-e.min)/(e.max-e.min)}%`),P=f(()=>e.range?`${100*(v.value-e.min)/(e.max-e.min)}%`:"0%"),z=f(()=>e.vertical?{height:e.height}:{}),K=f(()=>e.vertical?{height:k.value,bottom:P.value}:{width:k.value,left:P.value}),N=()=>{m.value&&(a.sliderSize=m.value[`client${e.vertical?"Height":"Width"}`])},T=r=>{const y=e.min+r*(e.max-e.min)/100;if(!e.range)return u;let V;return Math.abs(v.value-y)<Math.abs(n.value-y)?V=a.firstValue<a.secondValue?"firstButton":"secondButton":V=a.firstValue>a.secondValue?"firstButton":"secondButton",h[V]},E=r=>{const y=T(r);return y.value.setPosition(r),y},L=r=>{a.firstValue=r??e.min,R(e.range?[v.value,n.value]:r??e.min)},B=r=>{a.secondValue=r,e.range&&R([v.value,n.value])},R=r=>{d(oe,r),d(he,r)},$=async()=>{await de(),d(Ne,e.range?[v.value,n.value]:e.modelValue)},O=r=>{var y,V,A,j,U,H;if(i.value||a.dragging)return;N();let x=0;if(e.vertical){const w=(A=(V=(y=r.touches)==null?void 0:y.item(0))==null?void 0:V.clientY)!=null?A:r.clientY;x=(m.value.getBoundingClientRect().bottom-w)/a.sliderSize*100}else{const w=(H=(U=(j=r.touches)==null?void 0:j.item(0))==null?void 0:U.clientX)!=null?H:r.clientX,C=m.value.getBoundingClientRect().left;x=(w-C)/a.sliderSize*100}if(!(x<0||x>100))return E(x)};return{elFormItem:s,slider:m,firstButton:u,secondButton:b,sliderDisabled:i,minValue:v,maxValue:n,runwayStyle:z,barStyle:K,resetSize:N,setPosition:E,emitChange:$,onSliderWrapperPrevent:r=>{var y,V;((y=h.firstButton.value)!=null&&y.dragging||(V=h.secondButton.value)!=null&&V.dragging)&&r.preventDefault()},onSliderClick:r=>{O(r)&&$()},onSliderDown:async r=>{const y=O(r);y&&(await de(),y.value.onButtonDown(r))},onSliderMarkerDown:r=>{i.value||a.dragging||E(r)},setFirstValue:L,setSecondValue:B}},ra=(e,a,d,t)=>({stops:f(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const u=(e.max-e.min)/e.step,b=100*e.step/(e.max-e.min),h=Array.from({length:u-1}).map((i,v)=>(v+1)*b);return e.range?h.filter(i=>i<100*(d.value-e.min)/(e.max-e.min)||i>100*(t.value-e.min)/(e.max-e.min)):h.filter(i=>i>100*(a.firstValue-e.min)/(e.max-e.min))}),getStopStyle:u=>e.vertical?{bottom:`${u}%`}:{left:`${u}%`}}),sa=e=>f(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((d,t)=>d-t).filter(d=>d<=e.max&&d>=e.min).map(d=>({point:d,position:(d-e.min)*100/(e.max-e.min),mark:e.marks[d]})):[]),ua=(e,a,d,t,s,m)=>{const u=i=>{s(oe,i),s(he,i)},b=()=>e.range?![d.value,t.value].every((i,v)=>i===a.oldValue[v]):e.modelValue!==a.oldValue,h=()=>{var i,v;e.min>e.max&&Re("Slider","min should not be greater than max.");const n=e.modelValue;e.range&&le(n)?n[1]<e.min?u([e.min,e.min]):n[0]>e.max?u([e.max,e.max]):n[0]<e.min?u([e.min,n[1]]):n[1]>e.max?u([n[0],e.max]):(a.firstValue=n[0],a.secondValue=n[1],b()&&(e.validateEvent&&((i=m==null?void 0:m.validate)==null||i.call(m,"change").catch(k=>ke())),a.oldValue=n.slice())):!e.range&&te(n)&&!Number.isNaN(n)&&(n<e.min?u(e.min):n>e.max?u(e.max):(a.firstValue=n,b()&&(e.validateEvent&&((v=m==null?void 0:m.validate)==null||v.call(m,"change").catch(k=>ke())),a.oldValue=n)))};h(),ue(()=>a.dragging,i=>{i||h()}),ue(()=>e.modelValue,(i,v)=>{a.dragging||le(i)&&le(v)&&i.every((n,k)=>n===v[k])&&a.firstValue===i[0]&&a.secondValue===i[1]||h()},{deep:!0}),ue(()=>[e.min,e.max],()=>{h()})},ia=(e,a,d)=>{const t=q();return $e(async()=>{e.range?(le(e.modelValue)?(a.firstValue=Math.max(e.min,e.modelValue[0]),a.secondValue=Math.min(e.max,e.modelValue[1])):(a.firstValue=e.min,a.secondValue=e.max),a.oldValue=[a.firstValue,a.secondValue]):(!te(e.modelValue)||Number.isNaN(e.modelValue)?a.firstValue=e.min:a.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),a.oldValue=a.firstValue),ie(window,"resize",d),await de(),d()}),{sliderWrapper:t}},da=ne({name:"ElSlider"}),ca=ne({...da,props:Je,emits:qe,setup(e,{expose:a,emit:d}){const t=e,s=be("slider"),{t:m}=je(),u=Le({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:b,slider:h,firstButton:i,secondButton:v,sliderDisabled:n,minValue:k,maxValue:P,runwayStyle:z,barStyle:K,resetSize:N,emitChange:T,onSliderWrapperPrevent:E,onSliderClick:L,onSliderDown:B,onSliderMarkerDown:R,setFirstValue:$,setSecondValue:O}=oa(t,u,d),{stops:Q,getStopStyle:F}=ra(t,u,k,P),{inputId:Z,isLabeledByFormItem:W}=He(t,{formItemContext:b}),r=Ge(),y=f(()=>t.inputSize||r.value),V=f(()=>t.ariaLabel||m("el.slider.defaultLabel",{min:t.min,max:t.max})),A=f(()=>t.range?t.rangeStartLabel||m("el.slider.defaultRangeStartLabel"):V.value),j=f(()=>t.formatValueText?t.formatValueText(g.value):`${g.value}`),U=f(()=>t.rangeEndLabel||m("el.slider.defaultRangeEndLabel")),H=f(()=>t.formatValueText?t.formatValueText(S.value):`${S.value}`),x=f(()=>[s.b(),s.m(r.value),s.is("vertical",t.vertical),{[s.m("with-input")]:t.showInput}]),w=sa(t);ua(t,u,k,P,d,b);const C=f(()=>{const o=[t.min,t.max,t.step].map(ye=>{const D=`${ye}`.split(".")[1];return D?D.length:0});return Math.max.apply(null,o)}),{sliderWrapper:c}=ia(t,u,N),{firstValue:g,secondValue:S,sliderSize:X}=fe(u),ze=o=>{u.dragging=o};return ie(c,"touchstart",E,{passive:!1}),ie(c,"touchmove",E,{passive:!1}),We(Te,{...fe(t),sliderSize:X,disabled:n,precision:C,emitChange:T,resetSize:N,updateDragging:ze}),a({onSliderClick:L}),(o,ye)=>{var D,Ve;return M(),I("div",{id:o.range?l(Z):void 0,ref_key:"sliderWrapper",ref:c,class:_(l(x)),role:o.range?"group":void 0,"aria-label":o.range&&!l(W)?l(V):void 0,"aria-labelledby":o.range&&l(W)?(D=l(b))==null?void 0:D.labelId:void 0},[J("div",{ref_key:"slider",ref:h,class:_([l(s).e("runway"),{"show-input":o.showInput&&!o.range},l(s).is("disabled",l(n))]),style:G(l(z)),onMousedown:l(B),onTouchstartPassive:l(B)},[J("div",{class:_(l(s).e("bar")),style:G(l(K))},null,6),Pe(xe,{id:o.range?void 0:l(Z),ref_key:"firstButton",ref:i,"model-value":l(g),vertical:o.vertical,"tooltip-class":o.tooltipClass,placement:o.placement,role:"slider","aria-label":o.range||!l(W)?l(A):void 0,"aria-labelledby":!o.range&&l(W)?(Ve=l(b))==null?void 0:Ve.labelId:void 0,"aria-valuemin":o.min,"aria-valuemax":o.range?l(S):o.max,"aria-valuenow":l(g),"aria-valuetext":l(j),"aria-orientation":o.vertical?"vertical":"horizontal","aria-disabled":l(n),"onUpdate:modelValue":l($)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),o.range?(M(),ce(xe,{key:0,ref_key:"secondButton",ref:v,"model-value":l(S),vertical:o.vertical,"tooltip-class":o.tooltipClass,placement:o.placement,role:"slider","aria-label":l(U),"aria-valuemin":l(g),"aria-valuemax":o.max,"aria-valuenow":l(S),"aria-valuetext":l(H),"aria-orientation":o.vertical?"vertical":"horizontal","aria-disabled":l(n),"onUpdate:modelValue":l(O)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):re("v-if",!0),o.showStops?(M(),I("div",{key:1},[(M(!0),I(se,null,me(l(Q),(p,ee)=>(M(),I("div",{key:ee,class:_(l(s).e("stop")),style:G(l(F)(p))},null,6))),128))])):re("v-if",!0),l(w).length>0?(M(),I(se,{key:2},[J("div",null,[(M(!0),I(se,null,me(l(w),(p,ee)=>(M(),I("div",{key:ee,style:G(l(F)(p.position)),class:_([l(s).e("stop"),l(s).e("marks-stop")])},null,6))),128))]),J("div",{class:_(l(s).e("marks"))},[(M(!0),I(se,null,me(l(w),(p,ee)=>(M(),ce(l(na),{key:ee,mark:p.mark,style:G(l(F)(p.position)),onMousedown:Ue(va=>l(R)(p.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):re("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),o.showInput&&!o.range?(M(),ce(l(Oe),{key:0,ref:"input","model-value":l(g),class:_(l(s).e("input")),step:o.step,disabled:l(n),controls:o.showInputControls,min:o.min,max:o.max,precision:l(C),debounce:o.debounce,size:l(y),"onUpdate:modelValue":l($),onChange:l(T)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):re("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var ma=Me(ca,[["__file","slider.vue"]]);const ha=pe(ma);export{ha as E};
